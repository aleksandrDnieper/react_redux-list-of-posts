(this["webpackJsonpreact_redux-list-of-posts"]=this["webpackJsonpreact_redux-list-of-posts"]||[]).push([[0],{17:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"c",(function(){return a})),n.d(t,"d",(function(){return c})),n.d(t,"b",(function(){return o}));var r="https://jsonplaceholder.typicode.com",a="/posts",c="/users",o="/comments"},18:function(e,t){},23:function(e,t,n){e.exports=n(44)},33:function(e,t,n){},44:function(e,t,n){"use strict";n.r(t);var r,a=n(0),c=n.n(a),o=n(7),u=n.n(o),s=n(4),i=(n(33),n(34),n(20)),l=n.n(i),m=function(e){var t=e.user;return c.a.createElement("div",{className:"user"},c.a.createElement("p",null,"Contact info:"),c.a.createElement("p",null,"name: ".concat(t.name,", email: ").concat(t.email)),c.a.createElement("p",null,"address: ".concat(t.address.zipcode,", ").concat(t.address.street,", ").concat(t.address.city)))},p=n(1),d=n.n(p),f=n(3),E=n(5),b=n(21),O=n(8),v=n(2);!function(e){e.SET_POSTS="SET_POSTS",e.SET_LOADING="SET_LOADING",e.DELETE_POST="DELETE_POST",e.DELETE_COMMENT="DELETE_COMMENT",e.SET_QUERY="SET_QUERY",e.SET_ERROR="SET_ERROR"}(r||(r={}));var y={posts:[],isLoading:!1,query:"",error:!1},T=function(e){return{type:r.SET_POSTS,payload:e}},S=function(e){return{type:r.SET_LOADING,payload:e}},h=function(e){return{type:r.SET_ERROR,payload:e}},_=function(e){return e.posts},N=function(e){return e.isLoading},j=function(e){return e.query},L=function(e){return e.error},R=n(22),k=n(6),g=function(){var e=Object(f.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(k.BASE_URL).concat(t));case 2:return n=e.sent,e.abrupt("return",n.json());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),x=function(){var e=Object(f.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g(k.USERS_URL);case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),w=function(){var e=Object(f.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g(k.COMMENTS_URL);case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),C=function(){var e=Object(f.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g(k.POSTS_URL);case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),D=function(){var e=Object(f.a)(d.a.mark((function e(){var t,n,r,a,c,o;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([x(),w(),C()]);case 2:return t=e.sent,n=Object(R.a)(t,3),r=n[0],a=n[1],c=n[2],o=c.map((function(e){var t=r.find((function(t){return t.id===e.userId})),n=a.filter((function(t){return t.postId===e.id}));return Object(v.a)({},e,{user:t,comments:n})})),e.abrupt("return",o);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();var P=(0,E.c)(Object(E.a)(b.a)),U=Object(E.d)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case r.SET_POSTS:return Object(v.a)({},e,{posts:t.payload});case r.SET_LOADING:return Object(v.a)({},e,{isLoading:t.payload});case r.SET_ERROR:return Object(v.a)({},e,{error:t.payload});case r.SET_QUERY:return Object(v.a)({},e,{query:t.payload});case r.DELETE_POST:return Object(v.a)({},e,{posts:Object(O.a)(e.posts).filter((function(e){return e.id!==t.payload}))});case r.DELETE_COMMENT:return Object(v.a)({},e,{posts:Object(O.a)(e.posts).map((function(e){return Object(v.a)({},e,{comments:Object(O.a)(e.comments).filter((function(e){return e.id!==t.payload}))})}))});default:return e}}),y,P),M={deleteCommentThunk:function(e){return function(t){var n;t((n=e,{type:r.DELETE_COMMENT,payload:n}))}}},q=Object(s.b)(null,M)((function(e){var t=e.deleteCommentThunk,n=e.comment,r=n.name,o=n.body,u=n.email,s=n.id,i=Object(a.useCallback)((function(){return t(s)}),[s,t]);return c.a.createElement("div",{className:"card text-white bg-info mb-3"},c.a.createElement("h3",{className:"card-header"},r),c.a.createElement("div",{className:"card-body"},c.a.createElement("blockquote",{className:"blockquote mb-0"},c.a.createElement("p",null,o),c.a.createElement("footer",{className:"blockquote-footer"},u))),c.a.createElement("button",{type:"button",className:"btn btn-light",onClick:i},"Delete comment"))})),I=function(e){var t=e.comments;return c.a.createElement("div",{className:"commentList"},c.a.createElement("div",{className:"comments"},t.map((function(e){return c.a.createElement(q,{key:e.id,comment:e})}))))},A={deletePost:function(e){return{type:r.DELETE_POST,payload:e}}},Q=Object(s.b)(null,A)((function(e){var t=e.deletePost,n=e.post,r=n.title,o=n.body,u=n.id,s=n.user,i=n.comments,l=Object(a.useCallback)((function(){return t(u)}),[u,t]);return c.a.createElement("div",{className:"list__item"},c.a.createElement("div",{className:"card"},c.a.createElement("h4",{className:"card-header"},r),c.a.createElement("div",{className:"card-body"},c.a.createElement("blockquote",{className:"blockquote mb-0"},c.a.createElement("p",null,o),c.a.createElement("footer",{className:"blockquote-footer"},c.a.createElement(m,{user:s}))),c.a.createElement("button",{type:"button",className:"btn btn-danger",onClick:l},"Delete post"),c.a.createElement(I,{comments:i}))))})),G=function(e){var t=e.posts;return c.a.createElement("div",{className:"list"},t.map((function(e){return c.a.createElement(Q,{key:e.id,post:e})})))},Y={setLoading:S,setPosts:T,setQuery:function(e){return{type:r.SET_QUERY,payload:e}},loadData:function(){return function(){var e=Object(f.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t(h(!1)),t(S(!0)),e.next=5,D();case 5:n=e.sent,t(T(n)),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),console.error(e.t0),t(h(!0));case 13:return e.prev=13,t(S(!1)),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[0,9,13,16]])})));return function(t){return e.apply(this,arguments)}}()}},B=Object(s.b)((function(e){return{posts:_(e),isLoading:N(e),query:j(e),error:L(e)}}),Y)((function(e){var t=e.query,n=e.posts,r=e.error,o=e.isLoading,u=e.loadData,s=e.setQuery,i=Object(a.useCallback)(l()(s,1e3),[]),m=Object(a.useMemo)((function(){return n.filter(function(e){return function(t){return t.title.includes(e)||t.body.includes(e)}}(t))}),[n,t]);return c.a.createElement("div",{className:"app"},e.posts.length?c.a.createElement(c.a.Fragment,null,c.a.createElement("input",{type:"text",id:"input",className:"form-control",placeholder:"type search",onChange:function(e){var t=e.target.value;i(t.toLowerCase())}}),c.a.createElement(G,{posts:t?m:n})):c.a.createElement(c.a.Fragment,null,c.a.createElement("h1",null,"Dynamic list of posts"),r&&c.a.createElement("p",{className:"text-danger"},"Error occured"),c.a.createElement("button",{type:"button",className:"btn btn-primary",onClick:function(){u()}},o?"Loading.......":"Start load")))}));u.a.render(c.a.createElement(s.a,{store:U},c.a.createElement(B,null)),document.getElementById("root"))},6:function(e,t,n){"use strict";var r=n(17);n.d(t,"BASE_URL",(function(){return r.a})),n.d(t,"COMMENTS_URL",(function(){return r.b})),n.d(t,"POSTS_URL",(function(){return r.c})),n.d(t,"USERS_URL",(function(){return r.d}));n(18)}},[[23,1,2]]]);
//# sourceMappingURL=main.23271730.chunk.js.map